<dom-module id="x-contacts-page">
    <template>
        <link rel="stylesheet" href="x-contacts-page.css">

        <iron-ajax id="getContactsReq" auto
            url="http://localhost:3000/contact"
            method="GET"
            handle-as="json"
            last-response="{{contacts}}"
            with-credentials="true">
        </iron-ajax>

        <iron-ajax id="addContactReq"
                   url="http://localhost:3000/contact"
                   method="POST"
                   body = "{{reqBody}}"
                   content-type = "application/json"
                   handle-as="json"
                   on-response="handleResponse"
                   with-credentials="true">
        </iron-ajax>
        <paper-material elevation="1">
            <div id="contact_title">
                <h3>Contacts List</h3>
                <paper-fab class="accent-color" id="add_contact_but" icon="social:group-add" on-click="openDialog"></paper-fab>
            </div>
            <template is="dom-repeat" items="{{contacts}}" as="contact">
                <x-contact-item contact="{{contact}}"></x-contact-item>
            </template>
        </paper-material>
        <paper-dialog id="addContactDialog" modal>
            <p>
                <paper-input label="Enter contact email" value="{{contact_email}}"></paper-input>
            </p>
            <div class="buttons">
                <paper-button dialog-dismiss>Cancel</paper-button>
                <paper-button dialog-confirm autofocus on-click="addContact">Add</paper-button>
            </div>
        </paper-dialog>
    </template>

    <script src="x-contacts-page.js"></script>

</dom-module>